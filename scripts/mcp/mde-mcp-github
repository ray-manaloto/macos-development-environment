#!/usr/bin/env bash
set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
# shellcheck source=/dev/null
source "$SCRIPT_DIR/mde-mcp-common.sh"

if [[ -z "${GITHUB_PERSONAL_ACCESS_TOKEN:-}" ]]; then
  mde_mcp_require_secret "GITHUB_TOKEN" "mde-github-token" "MDE_OP_GITHUB_TOKEN_REF" "GitHub token" || exit 1
  export GITHUB_PERSONAL_ACCESS_TOKEN="$GITHUB_TOKEN"
fi

mde_mcp_run_node_tool "@modelcontextprotocol/server-github"
